\subsubsection{气泡控制}

我们的气泡插得很少，都是非常必要的地方才会插气泡。

\begin{center}
    \tcaption{气泡控制}\label{table:bubble}
    \begin{longtable}{p{0.2\columnwidth}p{0.8\columnwidth}}
        \toprule
        气泡 & 气泡描述 \\
        \midrule
        数据冲突 & 当MEM段取出寄存器的值之后，但是还未写回时，下一条指令需要使用此寄存器的值作为ALU的源操作数，我们会在decode的时候发现，插一个气泡\\
        结构冲突 & 当我们读写指令的时候，由于指令RAM总线不够，我们不能取PC对应的指令，此时我们锁住PC，并且插一个气泡\\
        PC锁死 & 当我们读写指令的时候（在MEM段读指令RAM）我们会锁住PC的使能端，此时如果发生了跳转，或是分支预测的错误，PC无法修改。于是我们插一个气泡防止这种情况发生\\
        分支预测 & 当分支预测错误时，我们会把错误取出的指令清空，相当于插一个气泡\\
        中断处理 & 当中断来临时，我们会让MEM和WB段继续，而清空ID和ALU段的指令，相当于插一个气泡\\
        \bottomrule
    \end{longtable}
\end{center}

除了上述描述的单个冲突以外，我们还处理了它们的组合。比如结构冲突和数据冲突同时发生的时候，我们会在两个地方插两个气泡，这也是可能导致CPU效率最低的情形。